{% extends "base.html" %}

{% block lab %}Лабораторная 8{% endblock %}

{% block main %}
    <h1>Список всех статей</h1>

    <div style="margin-bottom: 20px;">
        <a href="/lab8/create" style="padding: 8px 15px; background-color: #4CAF50; color: white; text-decoration: none; border-radius: 5px;">Создать новую статью</a>
    </div>

    {% if articles %}
        <ul style="list-style-type: none; padding: 0;">
            {% for article in articles %}
                <li style="border: 1px solid #ccc; padding: 15px; margin-bottom: 10px; border-radius: 5px;">
                    <h2 style="margin-top: 0;">{{ article.title }}</h2>
                    
                    <p style="font-style: italic;">
                        Автор: {{ author_logins.get(article.login_id, 'Неизвестный') }} {% if article.is_favorite %}<span style="color: gold; margin-left: 10px;">★ Избранное</span>{% endif %}
                        {% if not article.is_public %}<span style="color: red; margin-left: 10px;">(Приватная)</span>{% endif %}
                    </p>
                    
                    {% if article.login_id == current_user.id %}
                        <div style="margin-top: 10px;">
                            <a href="/lab8/edit/{{ article.id }}" style="padding: 5px 10px; background-color: #007bff; color: white; text-decoration: none; border-radius: 3px; margin-right: 10px;">Редактировать</a>
                            
                            <form method="post" action="/lab8/delete/{{ article.id }}" style="display: inline;" 
                                  onsubmit="return confirm('Вы уверены, что хотите удалить статью «{{ article.title }}»?');">
                                <button type="submit" style="padding: 5px 10px; background-color: #dc3545; color: white; border: none; border-radius: 3px; cursor: pointer;">
                                    Удалить
                                </button>
                            </form>
                        </div>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>На данный момент нет созданных статей.</p>
    {% endif %}
{% endblock %}